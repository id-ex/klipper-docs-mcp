# Klipper Docs MCP Server

> MCP-сервер для локального доступа к документации Klipper 3D-принтера.
> Оптимизирован для работы на слабом железе (Raspberry Pi).

## Особенности

- **Локальный поиск** — работает без внешних API
- **Минимальное потребление ресурсов** — потоковое чтение, отсутствие БД
- **Проверка обновлений** — уведомление при устаревшей документации
- **Безопасность** — защита от path traversal

## Установка

### Требования
- Python 3.10+
- git

### Установка из исходников

```bash
# Клонирование репозитория
git clone <repo-url>
cd klipper_docs_mcp

# Установка зависимостей
pip install -e .

# Или используя uv (рекомендуется)
uv pip install -e .
```

## Использование

### Настройка MCP-клиента

Добавьте в конфигурацию MCP-клиента (например, Claude Desktop):

```json
{
  "mcpServers": {
    "klipper-docs": {
      "command": "python",
      "args": ["-m", "klipper_docs_mcp.server"],
      "env": {
        "KLIPPER_DOCS_PATH": "/path/to/docs"
      }
    }
  }
}
```

### Доступные инструменты

| Инструмент | Описание |
|------------|----------|
| `search_docs(query)` | Поиск по документации (до 7 результатов) |
| `read_doc(path)` | Чтение файла по относительному пути |
| `list_docs_map()` | Отображение структуры документации |
| `sync_docs()` | Синхронизация с удалённым репозиторием |

### Примеры использования

```
# Поиск информации о bed_mesh
search_docs("bed mesh")

# Чтение конфигурационного справочника
read_doc("Config_Reference.md")

# Просмотр структуры документации
list_docs_map()

# Обновление документации
sync_docs()
```

## Переменные окружения

| Переменная | Описание | По умолчанию |
|------------|----------|--------------|
| `KLIPPER_DOCS_PATH` | Путь к папке с документацией | `./docs` |

## Разработка

### Запуск тестов

```bash
pip install pytest pytest-asyncio
pytest
```

### Структура проекта

```
klipper_docs_mcp/
├── klipper_docs_mcp/
│   ├── __init__.py
│   └── server.py          # Основной MCP-сервер
├── tests/
│   ├── conftest.py
│   └── test_server.py     # Unit-тесты
├── pyproject.toml
├── requirements.txt
└── README.md
```

## Лицензия

MIT
